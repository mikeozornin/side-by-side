# Конфигурация приложения
DATA_DIR=/var/app/side-by-side/data
LOG_DIR=/var/app/side-by-side/logs
PORT=3000
BASE_URL=http://localhost:3000
NODE_ENV=development

# Database provider: "sqlite" or "postgres"
DB_PROVIDER=sqlite
DB_PATH=/var/app/side-by-side/app.db
# Connection string for PostgreSQL (only used if DB_PROVIDER is "postgres")
# Example: postgresql://user:password@localhost:5432/dbname
# DB_PROVIDER=postgres
# DATABASE_URL=

# URL для ссылок на голосования (клиентская часть)
# В dev режиме: http://localhost:5173
# В prod режиме: http://localhost:3000 (или ваш домен)
VOTING_BASE_URL=http://localhost:5173

# URL клиентской части (для magic links)
# В dev режиме: http://localhost:5173
# В prod режиме: http://localhost:3000 (или ваш домен)
CLIENT_URL=http://localhost:5173

# Режим работы сервера
# development - для разработки (API на /api, клиент отдельно)
# production - для продакшна (API на /api, клиент на /)
SERVER_MODE=development

# Уведомления в чаты
# Локализация уведомлений (ru/en)
NOTIFICATIONS_LOCALE=ru

# Mattermost
MATTERMOST_ENABLED=false
MATTERMOST_WEBHOOK_URL=https://your-mattermost-server.com/hooks/your-webhook-id

# Telegram (для будущего)
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=your-bot-token
TELEGRAM_CHAT_ID=your-chat-id

# Web Push уведомления
WEB_PUSH_ENABLED=false
# Сгенерируйте ключи командой: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=your_vapid_public_key_here
VAPID_PRIVATE_KEY=your_vapid_private_key_here
VAPID_EMAIL=mailto:admin@your-domain.com

# Rate Limiting
# Максимальное количество созданий голосований за минуту с одного IP
RATE_LIMIT_VOTING_PER_MINUTE=6
# Максимальное количество созданий голосований за час с одного IP
RATE_LIMIT_VOTING_PER_HOUR=60
# Максимальное количество запросов magic link за минуту с одного IP
RATE_LIMIT_AUTH_MAGIC_LINK_PER_MINUTE=5
# Максимальное количество попыток верификации токена за минуту с одного IP
RATE_LIMIT_AUTH_VERIFY_TOKEN_PER_MINUTE=5

# Режим аутентификации
# anonymous - анонимный доступ (кто угодно может создавать и голосовать)
# magic-links - авторизация через magic links
AUTH_MODE=magic-links

# Автоапрув сессий в dev режиме (без отправки письма). Не используйте в продакшене!
# true - автоматически авторизует пользователя без отправки magic link
# false - отправляет magic link как обычно
AUTO_APPROVE_SESSIONS=true

# JWT секретный ключ для подписи токенов
# В продакшене ОБЯЗАТЕЛЬНО используйте сложный случайный ключ!
# JWT_SECRET - сгенерируйте сильный случайный ключ минимум 256 бит
# Генерация: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=

# SMTP настройки для отправки magic link'ов
# Порт можно не указывать - будет определен автоматически по хосту
SMTP_HOST=your-smtp-server.com
SMTP_PORT=587  # Опционально: 587 (STARTTLS), 465 (SSL), или 0 для автоопределения
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password
SMTP_FROM_EMAIL=noreply@your-domain.com

# S3 Storage Configuration
# Драйвер хранилища: "local" или "s3"
STORAGE_DRIVER=local
S3_ENDPOINT=
S3_REGION=us-east-1
S3_BUCKET=side-by-side
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
# Force path style (обязательно для MinIO)
S3_FORCE_PATH_STYLE=true